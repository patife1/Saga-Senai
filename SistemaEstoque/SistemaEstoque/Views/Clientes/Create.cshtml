@model SistemaEstoque.Models.Cliente
@{
    ViewData["Title"] = "Novo Cliente";
}

<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2><i class="bi bi-person-plus"></i> Novo Cliente</h2>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Voltar
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div class="mb-3">
                                <label asp-for="Nome" class="form-label"></label>
                                <input asp-for="Nome" class="form-control" placeholder="Nome completo do cliente" />
                                <span asp-validation-for="Nome" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="CPF" class="form-label"></label>
                                <input asp-for="CPF" class="form-control" placeholder="000.000.000-00" 
                                       id="cpf" maxlength="14" />
                                <span asp-validation-for="CPF" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="Email" class="form-label"></label>
                                <input asp-for="Email" class="form-control" type="email" 
                                       placeholder="email@exemplo.com" />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="Telefone" class="form-label"></label>
                                <input asp-for="Telefone" class="form-control" placeholder="(00) 00000-0000" 
                                       id="telefone" maxlength="15" />
                                <span asp-validation-for="Telefone" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label asp-for="Endereco" class="form-label"></label>
                        <textarea asp-for="Endereco" class="form-control" rows="2" 
                                  placeholder="Endereço completo (opcional)"></textarea>
                        <span asp-validation-for="Endereco" class="text-danger"></span>
                    </div>
                    
                    <div class="mb-3">
                        <div class="form-check">
                            <input asp-for="Ativo" class="form-check-input" type="checkbox" value="true" checked>
                            <label asp-for="Ativo" class="form-check-label">
                                Cliente Ativo
                            </label>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a asp-action="Index" class="btn btn-secondary me-md-2">
                            <i class="bi bi-x-circle"></i> Cancelar
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle"></i> Salvar Cliente
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h6><i class="bi bi-info-circle"></i> Informações</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="bi bi-check-circle text-success"></i> <strong>Nome</strong> é obrigatório</li>
                    <li><i class="bi bi-info-circle text-info"></i> <strong>CPF</strong> deve ser único</li>
                    <li><i class="bi bi-info-circle text-info"></i> <strong>Email</strong> para comunicação</li>
                    <li><i class="bi bi-info-circle text-info"></i> <strong>Telefone</strong> para contato</li>
                    <li><i class="bi bi-info-circle text-info"></i> <strong>Endereço</strong> para entrega</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h6><i class="bi bi-shield-check"></i> Privacidade</h6>
            </div>
            <div class="card-body">
                <p class="card-text small">
                    Os dados pessoais dos clientes são protegidos conforme a LGPD. 
                    Utilize apenas as informações necessárias para o atendimento.
                </p>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        // Máscara para CPF
        document.getElementById('cpf').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });
        
        // Máscara para Telefone
        document.getElementById('telefone').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                if (value.length <= 10) {
                    value = value.replace(/(\d{2})(\d)/, '($1) $2');
                    value = value.replace(/(\d{4})(\d)/, '$1-$2');
                } else {
                    value = value.replace(/(\d{2})(\d)/, '($1) $2');
                    value = value.replace(/(\d{5})(\d)/, '$1-$2');
                }
                e.target.value = value;
            }
        });
    </script>
}
